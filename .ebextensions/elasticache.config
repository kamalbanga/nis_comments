Resources:
  MyElastiCache:
    Type: AWS::ElastiCache::CacheCluster
    Properties:
      CacheNodeType: 
         Fn::GetOptionSetting:
             OptionName : CacheNodeType
             DefaultValue: cache.m1.small
      NumCacheNodes: 
           Fn::GetOptionSetting:
             OptionName : NumCacheNodes
             DefaultValue: 1
      Engine: 
           Fn::GetOptionSetting:
             OptionName : Engine
             DefaultValue: redis
      CacheSecurityGroupNames:
        - Ref: awseb-e-dq2jhkeggf-stack-AWSEBSecurityGroup-1G1ZDJHYQDU9F
  awseb-e-dq2jhkeggf-stack-AWSEBSecurityGroup-1G1ZDJHYQDU9F:
    Type: AWS::ElastiCache::SecurityGroup
    Properties:
      Description: "Lock cache down to webserver access only"
  MyCacheSecurityGroupIngress:
    Type: AWS::ElastiCache::SecurityGroupIngress
    Properties:
      CacheSecurityGroupName: 
        Ref: awseb-e-dq2jhkeggf-stack-AWSEBSecurityGroup-1G1ZDJHYQDU9F
      EC2SecurityGroupName:
        Ref: default